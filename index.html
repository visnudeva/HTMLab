<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTMLab by Visnudeva</title>
    <!-- Use the Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Apply the Inter font and dark theme globally */
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden; /* Prevent horizontal scroll on body */
            transition: background-color 0.5s ease;
        }

        /* Hide scrollbars for a cleaner look on the iframes, but allow content to scroll if needed */
        .project-iframe::-webkit-scrollbar {
            display: none;
        }
        .project-iframe {
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }

        /* Styles for the Cover Flow container */
        .cover-flow-container {
            /* Flexbox to arrange items horizontally */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: nowrap;
            gap: 2rem;
            padding: 2rem 0;
            perspective: 1000px; /* Perspective for 3D transform effect */
        }
        
        /* Base styles for the project cards in the cover flow */
        .project-card {
            background-color: #0c0a09; /* bg-gray-950 equivalent */
            border-radius: 1.5rem; /* rounded-3xl equivalent */
            padding: 1.5rem; /* p-6 equivalent */
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 0.5s ease-in-out,
                        box-shadow 0.5s ease-in-out;
            transform-style: preserve-3d;
            cursor: pointer;
            width: 400px; /* Set a fixed width for consistent sizing */
            max-width: 90vw; /* Ensure it's responsive on smaller screens */
            position: relative; /* Needed for the link icon to be positioned correctly */
        }

        /* Default state of the card before a hover or click */
        /*
        .project-card {
            opacity: 0.5;
            transform: scale(0.85);
        }
        */

        /* Hover effect for cards */
        .project-card:hover {
            transform: scale(1.05); /* Slightly bigger on hover */
            opacity: 1; /* Full opacity on hover */
            box-shadow: 0 50px 100px -20px var(--shadow-color);
        }

        /* The active, centered card. We are no longer using this `active` class. */
        .project-card.active {
            z-index: 10;
            transform: scale(1.1);
            opacity: 1;
            box-shadow: 0 50px 100px -20px var(--shadow-color);
        }

        /* Styles for the full-screen modal */
        .project-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9); /* Semi-transparent overlay */
            z-index: 100; /* Above everything else */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0; /* Hidden by default */
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .project-modal.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: #0c0a09;
            border-radius: 1.5rem;
            padding: 2rem;
            width: 90%;
            max-width: 1200px;
            height: 90%;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .modal-iframe-container {
            flex-grow: 1;
            overflow: hidden;
            border-radius: 1rem;
        }

        /* Custom CSS for the color cycling title effect */
        .color-cycle-text {
            background: linear-gradient(to right, #ef4444, #8b5cf6, #3b82f6, #8b5cf6, #ef4444, #8b5cf6, #3b82f6, #8b5cf6, #ef4444);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: color-cycle 15s linear infinite;
        }

        @keyframes color-cycle {
            to {
                background-position: 100% center;
            }
        }

        /* Styles for the dynamic header on scroll */
        .header {
            transition: all 0.5s ease-in-out;
        }

        .header.scrolled {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .header.scrolled .header-title-container {
            flex-grow: 1;
            text-align: center;
        }
        .header.scrolled .header-title {
            font-size: 2rem; /* text-3xl */
            line-height: 2.25rem;
        }
        @media (min-width: 768px) {
            .header.scrolled .header-title-container {
                flex-grow: 1;
                text-align: left;
            }
            .header.scrolled .header-title {
                font-size: 2.25rem; /* md:text-4xl */
                line-height: 2.5rem;
            }
        }

        .header.scrolled .header-subtitle {
            display: none;
        }
        .header.scrolled .header-catchphrase {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-200">

    <!-- Dynamic header without the backdrop blur -->
    <header id="dynamic-header" class="header fixed top-0 left-0 w-full z-50 bg-gray-950/60 px-4 py-8">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between transition-all duration-500">
            <!-- Title and Subtitle -->
            <div class="header-title-container text-center md:text-left transition-all duration-500">
                <a href="https://github.com/visnudeva/HTMLab" target="_blank" class="block mb-2">
                    <h1 class="header-title text-4xl md:text-5xl font-bold color-cycle-text transition-all duration-500">
                        HTMLab
                    </h1>
                </a>
                <a href="https://github.com/visnudeva" target="_blank" class="block">
                    <p class="header-subtitle text-xl md:text-2xl text-gray-400 tracking-widest transition-all duration-500">
                        by Visnudeva
                    </p>
                </a>
            </div>
            <!-- Catchphrase -->
            <p class="header-catchphrase text-lg md:text-xl text-gray-400 mx-auto mt-4 md:mt-0 md:text-right">
                A live, interactive showcase experience of my web development projects.
            </p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 mt-48">
        <!-- Projects grid section -->
        <section id="project-grid-section" class="cover-flow-container">
            <!-- Project Card: Laniakea -->
            <div class="project-card" data-title="Laniakea" data-description="A minimalist wallpaper generator inspired by the Laniakea Supercluster." data-link="https://visnudeva.github.io/Laniakea/" data-github="https://github.com/visnudeva/Laniakea">
                <h2 class="text-3xl font-bold color-cycle-text mb-2">
                    Laniakea
                </h2>
                <!-- Subtitle removed -->
                <!-- Iframe container with responsive aspect ratio -->
                <div class="relative w-full overflow-hidden rounded-xl h-[25vh] md:h-[30vh] bg-gray-800">
                    <iframe 
                        id="laniakea-iframe"
                        class="project-iframe absolute top-0 left-0 w-full h-full rounded-xl"
                        src="https://visnudeva.github.io/Laniakea/" 
                        frameborder="0" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>

            <!-- Project Card: Ambios -->
            <div class="project-card" data-title="Ambios" data-description="A web radio player with an ambient visualizer ." data-link="https://visnudeva.github.io/Ambios/" data-github="https://github.com/visnudeva/Ambios">
                <h2 class="text-3xl font-bold color-cycle-text mb-2">
                    Ambios
                </h2>
                <!-- Subtitle removed -->
                <div class="relative w-full overflow-hidden rounded-xl h-[25vh] md:h-[30vh] bg-gray-800">
                    <iframe 
                        id="ambios-iframe"
                        class="project-iframe absolute top-0 left-0 w-full h-full rounded-xl"
                        src="https://visnudeva.github.io/Ambios/" 
                        frameborder="0" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>

            <!-- Project Card: Holi -->
            <div class="project-card" data-title="Holi" data-description="A colorful web radio player with a visualizer inspired by the festival of colors, Holi." data-link="https://visnudeva.github.io/holi/" data-github="https://github.com/visnudeva/holi">
                <h2 class="text-3xl font-bold color-cycle-text mb-2">
                    Holi
                </h2>
                <!-- Subtitle removed -->
                <div class="relative w-full overflow-hidden rounded-xl h-[25vh] md:h-[30vh] bg-gray-800">
                    <iframe 
                        id="holi-iframe"
                        class="project-iframe absolute top-0 left-0 w-full h-full rounded-xl"
                        src="https://visnudeva.github.io/holi/" 
                        frameborder="0" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>

            <!-- Project Card: Monomyth Oracle -->
            <div class="project-card" data-title="Monomyth Oracle" data-description="An interactive journey into the hero's journey, providing guidance and insights." data-link="https://visnudeva.github.io/Monomyth-Oracle/" data-github="https://github.com/visnudeva/Monomyth-Oracle">
                <h2 class="text-3xl font-bold color-cycle-text mb-2">
                    Monomyth Oracle
                </h2>
                <!-- Subtitle removed -->
                <div class="relative w-full overflow-hidden rounded-xl h-[25vh] md:h-[30vh] bg-gray-800">
                    <iframe 
                        id="monomyth-iframe"
                        class="project-iframe absolute top-0 left-0 w-full h-full rounded-xl"
                        src="https://visnudeva.github.io/Monomyth-Oracle/" 
                        frameborder="0" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center py-8 text-gray-500">
        <a href="mailto:visnudeva@pm.me" class="hover:underline">
            <p>&copy; 2025 Visnudeva</p>
        </a>
    </footer>

    <!-- Full-Screen Modal HTML -->
    <div id="project-modal" class="project-modal">
        <div class="modal-content">
            <h2 id="modal-title" class="text-3xl md:text-5xl font-bold color-cycle-text mb-2"></h2>
            <p id="modal-description" class="text-gray-400 mb-4"></p>
            <div class="modal-iframe-container">
                <!-- The iframe will be dynamically loaded here -->
                <iframe id="modal-iframe" class="w-full h-full rounded-xl" frameborder="0" allowfullscreen></iframe>
            </div>
            <!-- Links for GitHub and live site -->
            <div class="flex justify-center md:justify-end mt-4 space-x-4">
                <a id="modal-github-link" href="#" target="_blank" class="px-6 py-3 bg-gray-800 text-white rounded-full transition-transform hover:scale-105">
                    GitHub
                </a>
                <a id="modal-live-link" href="#" target="_blank" class="px-6 py-3 bg-indigo-600 text-white rounded-full transition-transform hover:scale-105">
                    View Live
                </a>
            </div>
            <div id="modal-message" class="text-center text-red-400 mt-4 hidden">
                Loading...
            </div>
        </div>
    </div>

    <script>
        // Get all elements with the class 'project-card' and the modal
        const projectCards = document.querySelectorAll('.project-card');
        const projectModal = document.getElementById('project-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalDescription = document.getElementById('modal-description');
        const modalIframe = document.getElementById('modal-iframe');
        const modalGithubLink = document.getElementById('modal-github-link');
        const modalLiveLink = document.getElementById('modal-live-link');
        const modalMessage = document.getElementById('modal-message');
        
        let globalShadowColor = '';
        let modalTimeout;

        /**
         * Generates a random RGBA color string.
         * The alpha value is fixed at 0.4 to ensure the shadow is semi-transparent.
         * @returns {string} The formatted RGBA color string.
         */
        function getRandomRgbaColor() {
            const r = Math.floor(Math.random() * 256);
            const g = Math.floor(Math.random() * 256);
            const b = Math.floor(Math.random() * 256);
            return `rgba(${r}, ${g}, ${b}, 0.4)`;
        }

        // Set the global color once on page load
        globalShadowColor = getRandomRgbaColor();

        /**
         * Sets up the event listeners for the project cards.
         */
        function setupCardEffects() {
            // Add mouseenter and mouseleave listeners to each card for the hover effect
            projectCards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    // Apply the hover effect with the global color
                    card.style.boxShadow = `0 50px 100px -20px ${globalShadowColor}`;

                    // Clear any previous timeout to prevent multiple modals
                    clearTimeout(modalTimeout);

                    // Set a new timeout to open the modal after a short delay
                    modalTimeout = setTimeout(() => {
                        // Extract data from the clicked card's data attributes
                        const title = card.dataset.title;
                        const description = card.dataset.description;
                        const link = card.dataset.link;
                        const github = card.dataset.github;

                        // Update the modal content with the card's data
                        modalTitle.textContent = title;
                        modalDescription.textContent = description;
                        modalIframe.src = link;
                        modalGithubLink.href = github;
                        modalLiveLink.href = link;

                        // Make the modal visible
                        projectModal.classList.add('visible');
                        // Lock the body from scrolling
                        document.body.style.overflow = 'hidden';
                    }, 500); // 500ms delay
                });

                card.addEventListener('mouseleave', () => {
                    card.style.boxShadow = 'none';
                    // Clear the timeout if the mouse leaves the card before the delay is over
                    clearTimeout(modalTimeout);
                });
            });

            // Add a click listener to the modal background to close it
            projectModal.addEventListener('click', (event) => {
                // Check if the click occurred on the modal background itself, not its children
                if (event.target === projectModal) {
                    projectModal.classList.remove('visible');
                    document.body.style.overflow = 'auto';
                }
            });
        }
        
        // Call the function to set up the effects when the window loads
        window.addEventListener('load', setupCardEffects);

        // --- JavaScript for the dynamic header ---
        const header = document.getElementById('dynamic-header');
        const scrollThreshold = 50;

        window.addEventListener('scroll', () => {
            if (window.scrollY > scrollThreshold) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
    </script>
</body>
</html>
